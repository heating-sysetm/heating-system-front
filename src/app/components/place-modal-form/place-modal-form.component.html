<div class="places-form " dir="rtl">
  <h2 class="mb-2 px-4 text-center">افزودن داشبورد</h2>
  <mat-dialog-content class="py-4 text-right">

    <mat-horizontal-stepper linear #stepper>
      <mat-step [stepControl]="placeForm">
        <form [formGroup]="placeForm" >
          <ng-template matStepLabel>افزودن محل مانیتورینگ</ng-template>
        <div class="py-4">
          <mat-form-field class="mb-2 px-2 full-width text-right">
            <mat-label>نام محل</mat-label>
            <input matInput formControlName="placeName" maxlength="46" matTooltipPosition="right" autocomplete="off"
              type="text" placeholder="" required />
          </mat-form-field>
          <div class="row mb-4">
            <mat-form-field class="text-right col-4 px-2">
              <mat-label>پورت دستگاه (Port)</mat-label>
              <input matInput formControlName="port" pattern="[0-9-]+" minlength="4" maxlength="6"
                matTooltipPosition="right" type="text" autocomplete="off" placeholder="مثال 8080" required />
            </mat-form-field>
            <mat-form-field class="text-right col-8 px-2">
              <mat-label>آی پی دستگاه (Ip)</mat-label>
              <input matInput autocomplete="off" formControlName="ipNumber" pattern="[0-9-.]+" minlength="4"
                maxlength="12" matTooltipPosition="right" type="text" placeholder="مثال 192.168.1.2" required />
            </mat-form-field>
          </div>
          <button mat-button matStepperNext class="m-auto add-btn"><strong>بعدی</strong></button>
        
        </div>  
        </form>

      </mat-step>
      <mat-step [stepControl]="equipmentForm">
        <form [formGroup]="equipmentForm" class="">
          <ng-template matStepLabel>افزودن تجهیزات</ng-template>

          <div class="row py-4">
            <div class="col-8">
              <mat-form-field appearance="fill" class="full-width">
                <mat-label>نام تجهیز</mat-label>
                <input matInput autocomplete="off" formControlName="eqName"
                 placeholder="">
              </mat-form-field>
            </div>
            <div class="col-4 ">
              <mat-form-field dir="rtl" class="text-right" appearance="fill">
                <mat-label>انتخاب نوع تجهیز</mat-label>
                <mat-select formControlName="eqType">
                  <mat-option></mat-option>
                  <mat-option [value]="eq.value" *ngFor="let eq of eqTypes">{{
                    eq.key
                  }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            
          </div>

          <mat-form-field *ngIf="fruits.length>0" class="example-chip-list my-4 full-width" appearance="fill">
            <mat-label>تجهیزات</mat-label>
            <mat-chip-list #chipList aria-label="Fruit selection" class="full-width"> 
              <mat-chip *ngFor="let fruit of fruits" [selectable]="selectable" [removable]="removable"
                (removed)="remove(fruit)">
                {{fruit.key}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
            </mat-chip-list>
          </mat-form-field>

          <div class="m-auto py-2">
            <button mat-button matStepperPrevious class="cancel-btn ">بازگشت</button>
            <button mat-button (click)="add()" class="add-new-btn mx-2">افزودن</button>
            <button mat-button *ngIf="fruits.length>0" matStepperNext class="add-btn">بعدی</button>
          </div>
        </form>
      </mat-step>


      <mat-step>

        <form [formGroup]="sensorForm">
          <ng-template matStepLabel>افزودن سنسور</ng-template>


          <mat-form-field appearance="fill" class="full-width">
            <mat-label>نام سنسور</mat-label>
            <input matInput autocomplete="off" formControlName="sensorName" placeholder=""
              >
          </mat-form-field>
          <div class="row">
            <div class="col-md-6">
              <mat-form-field dir="rtl" class="text-right full-width mt-3" appearance="fill">
                <mat-label> انتخاب تجهیز مربوطه</mat-label>
                <mat-select formControlName="sensorEquipment">
                  <mat-option></mat-option>
                  <mat-option [value]="eq.value" *ngFor="let eq of fruits">{{
                    eq.key
                  }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="col-md-6">
              <mat-form-field dir="rtl" class="text-right full-width mt-3" appearance="fill">
                <mat-label>انتخاب نوع سنسور</mat-label>
                <mat-select formControlName="sensorType">
                  <mat-option></mat-option>
                  <mat-option [value]="sen.value" *ngFor="let sen of sensorTypes">{{
                    sen.key
                  }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <mat-form-field *ngIf="sensors.length>0" class="example-chip-list my-4 full-width" appearance="fill">
            <mat-label>سنسور ها</mat-label>
            <mat-chip-list #chipList2 aria-label="sensor selection" class="full-width"> 
              <mat-chip *ngFor="let sensor of sensors" [selectable]="selectable" [removable]="removable"
                (removed)="removeSensor(sensor)">
                {{sensor.key}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
            </mat-chip-list>
          </mat-form-field>

          




          <div class="py-2">
            <button mat-button matStepperPrevious class="cancel-btn">بازگشت</button>
            <button mat-button (click)="addSensor()" class="add-new-btn mx-2">افزودن</button>
            <button mat-button *ngIf="scheck.length==fcheck.length && sensors.length>0" class="add-btn">ذخیره</button>
          </div>
        </form>
      </mat-step>
    </mat-horizontal-stepper>

  </mat-dialog-content>
  <!-- <mat-dialog-actions align="end" class="px-4 ">
    <button mat-button class="cancel-btn" mat-dialog-close>
      بازگشت
    </button>
    <button mat-button [mat-dialog-close]="true" class="add-btn" cdkFocusInitial>
      <strong>افزودن</strong>
    </button>
  </mat-dialog-actions> -->
</div>